
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Advanced Video Tool</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-900 text-white min-h-screen">

<div class="max-w-2xl mx-auto p-6 space-y-6">

<h1 class="text-4xl font-bold text-center text-red-500">
Advanced Video Tool
</h1>

<div class="bg-gray-800 p-6 rounded-xl space-y-4">

<input id="videoUrl"
placeholder="Paste direct .mp4 video link"
class="w-full p-3 rounded bg-gray-700 outline-none">

<button onclick="processVideo()"
class="w-full bg-red-600 p-3 rounded font-bold hover:bg-red-700">
Process Video
</button>

</div>

<div id="result" class="hidden bg-gray-800 p-6 rounded-xl space-y-4">
<img id="thumb" class="rounded">
<h2 id="title" class="font-bold"></h2>
<p id="time" class="text-sm text-gray-400"></p>
<p id="stats" class="text-sm text-green-400"></p>

<a id="downloadBtn"
class="block w-full bg-green-600 p-3 rounded font-bold text-center hover:bg-green-700">
Download Video
</a>
</div>

<div class="bg-gray-800 p-6 rounded-xl">
<h2 class="text-lg font-bold mb-3">Download History</h2>
<ul id="history" class="space-y-2 text-sm text-gray-400"></ul>
</div>

</div>

<script>
async function processVideo(){

const url = document.getElementById("videoUrl").value;
if(!url){
alert("Paste a link first!");
return;
}

const res = await fetch("/get_info",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({url})
});

const data = await res.json();

if(data.error){
alert(data.error);
return;
}

document.getElementById("result").classList.remove("hidden");
document.getElementById("thumb").src = data.thumbnail;
document.getElementById("title").innerText = data.title;
document.getElementById("time").innerText = "Processed at: " + data.time;
document.getElementById("stats").innerText = "Total Downloads: " + data.total_downloads;
document.getElementById("downloadBtn").href = data.download_url;

// Add to history
const li = document.createElement("li");
li.innerText = data.title + " (" + data.time + ")";
document.getElementById("history").prepend(li);
}
</script>

</body>
</html>
